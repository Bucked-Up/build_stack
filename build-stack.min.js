(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){var n=e[i][1][r];return o(n||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const round=num=>Math.round(num*100)/100;const getProdPrice=(prod,value)=>round(parseFloat(prod.price.split("$")[1])+parseFloat(value?.price?.split("$")[1]||0));const createCardBase=({prod:prod,value:value,hasFlexDiv:hasFlexDiv})=>{const card=document.createElement("div");const image=document.createElement("img");image.loading="lazy";const title=document.createElement("h3");title.classList.add("stack--product-card__title");const flavor=document.createElement("h4");card.classList.add("stack--product-card");title.innerHTML=`${prod.name} <span class="stack--upcharge-title">${prod.upcharge?`(+$${prod.upcharge})`:""}</span>`;if(value){image.src=value.images[0];image.alt=value.name;flavor.innerHTML=value.name}else{image.src=prod.image}card.appendChild(image);if(hasFlexDiv){const flexWrapper=document.createElement("div");flexWrapper.classList.add("stack--product-card__flex");const div=document.createElement("div");flexWrapper.appendChild(div);div.appendChild(title);if(value)div.appendChild(flavor);card.appendChild(flexWrapper)}else{const priceDOM=document.createElement("p");const newPriceDOM=document.createElement("p");const price=getProdPrice(prod,value);const newPrice=round(price-.2*price).toFixed(2);const pricesWrapper=document.createElement("div");pricesWrapper.classList.add("stack--product-card__prices-wrapper");priceDOM.classList.add("stack--product-card__prices-wrapper__old");newPriceDOM.classList.add("stack--product-card__prices-wrapper__new");priceDOM.innerHTML=price.toFixed(2);newPriceDOM.innerHTML=newPrice;pricesWrapper.appendChild(newPriceDOM);pricesWrapper.appendChild(priceDOM);card.appendChild(title);if(value)card.appendChild(flavor);card.appendChild(pricesWrapper)}return card};var _default=exports.default=createCardBase},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _handleStep=_interopRequireDefault(require("../handleStep.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createFormulaCard=formula=>{const card=document.createElement("div");card.role="button";card.classList.add("stack--product-card");card.classList.add("stack--formula-card");const image=document.createElement("img");image.loading="lazy";image.src=formula.image;const h3=document.createElement("h3");h3.classList.add("stack--product-card__formula-title");h3.innerHTML=formula.name;card.addEventListener("click",(()=>{(0,_handleStep.default)();localStorage.setItem("stack_choosen_formula",formula.id);document.querySelector(`[formula-id='${formula.id}']`).classList.add("stack--active")}));card.appendChild(image);card.appendChild(h3);return card};var _default=exports.default=createFormulaCard},{"../handleStep.js":21}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _handleProductAdded=_interopRequireDefault(require("../handleProductAdded.js"));var _handleRemoveButton=_interopRequireDefault(require("../handleRemoveButton.js"));var _createCardBase=_interopRequireDefault(require("./createCardBase.js"));var _createSelectedProduct=_interopRequireDefault(require("./createSelectedProduct.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createProductCard=({prod:prod,value:value})=>{const handleAddButton=button=>{button.addEventListener("click",(()=>{const array=JSON.parse(localStorage.getItem("stack_products"));const isStack=!array||array?.length<3;(0,_handleProductAdded.default)({prod:prod,value:value});(0,_createSelectedProduct.default)({prod:prod,value:value,isStack:isStack})}))};const card=(0,_createCardBase.default)({prod:prod,value:value});const button=document.createElement("button");const buttonsWrapper=document.createElement("div");buttonsWrapper.classList.add("stack--product-card__buttons-wrapper");buttonsWrapper.setAttribute("prod_id",prod.id);buttonsWrapper.setAttribute("value",value?.id);button.classList.add("stack--product-card__add-button");buttonsWrapper.appendChild(button);const addRemoveButtonsWrapper=document.createElement("div");addRemoveButtonsWrapper.classList.add("stack--product-card__add-remove-buttons-wrapper");const addButton=document.createElement("button");addButton.innerHTML="+";addButton.classList.add("stack--product-card__add-remove-buttons-wrapper__button");const removeButton=document.createElement("button");removeButton.innerHTML="-";removeButton.classList.add("stack--product-card__add-remove-buttons-wrapper__button");const quantityCounter=document.createElement("span");quantityCounter.innerHTML="0";addRemoveButtonsWrapper.appendChild(removeButton);addRemoveButtonsWrapper.appendChild(quantityCounter);addRemoveButtonsWrapper.appendChild(addButton);buttonsWrapper.appendChild(addRemoveButtonsWrapper);button.innerHTML="+ ADD";button.type="button";handleAddButton(button);handleAddButton(addButton);(0,_handleRemoveButton.default)({prod:prod,value:value,button:removeButton});card.appendChild(buttonsWrapper);return card};var _default=exports.default=createProductCard},{"../handleProductAdded.js":18,"../handleRemoveButton.js":20,"./createCardBase.js":1,"./createSelectedProduct.js":5}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _createProductCard=_interopRequireDefault(require("./createProductCard.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createProductSwiper=()=>{const swiper=document.createElement("div");swiper.classList.add("swiper");swiper.classList.add("stack--swiper-product");const swiperWrapper=document.createElement("div");swiperWrapper.classList.add("swiper-wrapper");swiper.appendChild(swiperWrapper);const navigationContainer=document.createElement("div");navigationContainer.classList.add("stack--navigation-container");const swiperNext=document.createElement("button");swiperNext.type="button";swiperNext.classList.add("stack--swiper-arrow");swiperNext.classList.add("stack--next");swiperNext.innerHTML='<svg width="47" height="46" viewBox="0 0 47 46" fill="white" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" width="46" height="46" rx="23" fill="#FF0000"/><rect x="32.0488" y="23" width="3.22807" height="18.5614" transform="rotate(135 32.0488 23)" fill="white"/><rect x="18.9238" y="36.125" width="3.22807" height="18.5614" transform="rotate(-135 18.9238 36.125)" fill="white"/></svg>';const swiperPrev=document.createElement("button");swiperPrev.classList.add("stack--swiper-arrow");swiperPrev.classList.add("stack--prev");swiperPrev.type="button";swiperPrev.innerHTML='<svg width="47" height="46" viewBox="0 0 47 46" fill="white" xmlns="http://www.w3.org/2000/svg"><rect width="46" height="46" rx="23" transform="matrix(-1 0 0 1 46.5 0)" fill="#FF0000"/><rect width="3.22807" height="18.5614" transform="matrix(0.707107 0.707107 0.707107 -0.707107 14.9512 23)" fill="white"/><rect width="3.22807" height="18.5614" transform="matrix(0.707107 -0.707107 -0.707107 -0.707107 28.0762 36.125)" fill="white"/></svg>';const swiperPagination=document.createElement("div");swiperPagination.classList.add("swiper-pagination");swiperPagination.classList.add("stack--swiper-pagination");navigationContainer.appendChild(swiperPrev);navigationContainer.appendChild(swiperPagination);navigationContainer.appendChild(swiperNext);return{swiper:swiper,wrapper:swiperWrapper,navigationContainer:navigationContainer}};const createProductCategory=({title:title,secondaryTitle:secondaryTitle,data:data,hasFormulas:hasFormulas})=>{const categoryContainer=document.createElement("div");const categoryTitle=document.createElement("h2");const categorySecondaryTitle=document.createElement("h2");const productsWrapper=document.createElement("div");categoryContainer.classList.add("stack--category-container");categoryContainer.id=secondaryTitle.replaceAll(" ","-").replaceAll(",","").toLowerCase();categoryTitle.innerHTML=title;categorySecondaryTitle.innerHTML=secondaryTitle;categoryTitle.classList.add("stack--category-title");categoryTitle.classList.add("stack--active");categorySecondaryTitle.classList.add("stack--category-title");productsWrapper.classList.add("stack--products-wrapper");categoryContainer.appendChild(categoryTitle);categoryContainer.appendChild(categorySecondaryTitle);categoryContainer.appendChild(productsWrapper);data.forEach((prod=>{if(Object.keys(prod.stock).every((key=>prod.stock[key]<=0)))return;const title=document.createElement("h3");const prodWrapper=document.createElement("div");prodWrapper.classList.add("stack--product-wrapper");productsWrapper.appendChild(prodWrapper);title.classList.add("stack--product-title");title.innerHTML=`${prod.name} <span class="stack--upcharge">${prod.upcharge?`(+$${prod.upcharge})`:""}</span>`;prodWrapper.appendChild(title);if(hasFormulas){prodWrapper.setAttribute("formula-id",prod.id)}if(prod.options[0]){const{swiper:swiper,wrapper:wrapper,navigationContainer:navigationContainer}=createProductSwiper();const grid=document.createElement("div");prod.options[0].values.forEach((value=>{if(!value.in_stock)return;const slide=document.createElement("div");slide.classList.add("swiper-slide");slide.appendChild((0,_createProductCard.default)({prod:prod,value:value}));wrapper.appendChild(slide)}));prodWrapper.appendChild(swiper);prodWrapper.appendChild(navigationContainer)}else{if(prod.stock["[]"]<=0)return;const prodCard=(0,_createProductCard.default)({prod:prod});prodCard.classList.add("small");productsWrapper.appendChild(prodCard)}}));return categoryContainer};var _default=exports.default=createProductCategory},{"./createProductCard.js":3}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _handleRemoveButton=_interopRequireDefault(require("../handleRemoveButton.js"));var _createCardBase=_interopRequireDefault(require("./createCardBase.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const createSelectedProduct=({prod:prod,value:value,isStack:isStack})=>{const removeButton=document.createElement("button");removeButton.type="button";removeButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 384 512"><path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>';removeButton.classList.add("stack--product-card__remove-button");const card=(0,_createCardBase.default)({prod:prod,value:value,hasFlexDiv:true});card.setAttribute("prod_id",prod.id);card.setAttribute("value",value?.id);card.querySelector(".stack--product-card__flex").appendChild(removeButton);(0,_handleRemoveButton.default)({prod:prod,value:value,button:removeButton,isStack:isStack});if(isStack){const selectedProductsWrapper=document.querySelector(".stack--selected-stack-products");selectedProductsWrapper.querySelector(".stack--placeholder")?.remove();selectedProductsWrapper.insertBefore(card,selectedProductsWrapper.firstChild);return}const selectedProductsWrapper=document.querySelector(".stack--selected-products .swiper-wrapper");selectedProductsWrapper.querySelector(".swiper-slide:has(.stack--placeholder)")?.remove();const swiperSlide=document.createElement("div");swiperSlide.classList.add("swiper-slide");swiperSlide.setAttribute("prod_id",prod.id);swiperSlide.setAttribute("value",value?.id);swiperSlide.appendChild(card);selectedProductsWrapper.insertBefore(swiperSlide,selectedProductsWrapper.firstChild);window.selectedProductsSwiper.update()};var _default=exports.default=createSelectedProduct},{"../handleRemoveButton.js":20,"./createCardBase.js":1}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _createFormulaCard=_interopRequireDefault(require("./createFormulaCard.js"));var _createProductCategory=_interopRequireDefault(require("./createProductCategory.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleDom=({data:data,formulas:formulas})=>{const prodRow=document.querySelector(".stack--prod-row");const prodGrid=document.querySelector(".stack--products-grid");formulas.forEach((formula=>{prodGrid.appendChild((0,_createFormulaCard.default)(formula))}));data.forEach(((category,i)=>prodRow.appendChild((0,_createProductCategory.default)({title:category.title,secondaryTitle:category.secondaryTitle,data:category.products,hasFormulas:i===0}))))};var _default=exports.default=handleDom},{"./createFormulaCard.js":2,"./createProductCategory.js":4}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const createPlaceholder=()=>{const placeholder=document.createElement("span");placeholder.classList.add("stack--placeholder");return placeholder};const createPlaceholderSwiper=()=>{const slide=document.createElement("div");slide.classList.add("swiper-slide");slide.appendChild(createPlaceholder());return slide};const removeCard=({prod:prod,value:value,isStack:isStack})=>{if(isStack){const selectedProductsWrapper=document.querySelector(".stack--selected-stack-products");const card=document.querySelector(`.stack--product-card[prod_id='${prod.id}'][value='${value?.id}']`);card.remove();if(selectedProductsWrapper.querySelectorAll(".stack--product-card").length<3)selectedProductsWrapper.appendChild(createPlaceholder())}else{const selectedProductsWrapper=document.querySelector(".stack--selected-products .swiper-wrapper");const swiperSlide=document.querySelector(`.swiper-slide[prod_id='${prod.id}'][value='${value?.id}']`);swiperSlide.remove();if(selectedProductsWrapper.querySelectorAll(".swiper-slide").length<4)selectedProductsWrapper.appendChild(createPlaceholderSwiper())}window.selectedProductsSwiper.update()};var _default=exports.default=removeCard},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const body=document.querySelector("body");const loadingDiv=document.createElement("div");const loadingP=document.createElement("p");loadingP.innerHTML="We are currently experiencing issues with our Shopify Storefront.<br>While issues are being resolved, we will redirect you to our main website momentarily!";loadingP.id="error-message-modal";const loadingSvg='<svg xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 98.466 107.356"><g transform="translate(-433.543 -156.68)"><path d="M521.728,160.137a8.377,8.377,0,0,0-1.208-.865,4.807,4.807,0,0,0,1.005,3.02c.791,1.453,1.6,2.9,2.339,4.379.663,1.321,1.294,2.663,1.928,4a5.081,5.081,0,0,1,.474,3.955c-1.579-1.018-3.254-1.895-4.735-3.059-1.41-1.11-2.014-2.693-2.842-4.232-2.227-4.068-4.973-8.144-9.035-10.555a6.553,6.553,0,0,0,1.419,2.589c.838,1.1,1.71,2.176,2.507,3.307a17.8,17.8,0,0,1,2.933,6.431c-.217.261-1.238-.122-1.483-.186-2.133-.592-4.205-1.447-6.456-1.407a26.4,26.4,0,0,0,6.941,4.4,5.531,5.531,0,0,1,2.138,1.611c1.312,1.686,1.434,4.119,1.66,6.156a33.319,33.319,0,0,1-1.879,16.44c-.548-4.371-2.8-8.761-6.628-11.121a7.977,7.977,0,0,0,1.721,4.77c2.672,3.789,2.315,8.693.8,12.864-2.557,2.841-5.8,4.794-8.948,6.9a35.351,35.351,0,0,0-1.265-10.27c-.06-.2-.312-1.449-.56-1.452-.211,2.107-.087,4.217-.346,6.323a22.032,22.032,0,0,1-2.294,7.333c-.306-.628-.5-1.312-.783-1.95a6.183,6.183,0,0,0-3.8-3.219,23.3,23.3,0,0,1,3.292,7.123c-1.494,1.027-2.961,2.071-4.37,3.212a13.8,13.8,0,0,1-4.206,2.238l-14.446-.021c-3.127-1.086-5.581-3.386-8.253-5.233a23.15,23.15,0,0,1,3.332-7.318,6.2,6.2,0,0,0-3.778,3.178c-.3.649-.5,1.342-.8,1.99a22.034,22.034,0,0,1-2.3-7.333c-.26-2.106-.136-4.216-.346-6.323-.249,0-.5,1.254-.56,1.452a34.907,34.907,0,0,0-1.254,10.448c-3.918-2.532-8.09-4.942-10.779-8.882a13.544,13.544,0,0,1,.487-9.588c.635-1.3,1.7-2.321,2.114-3.727a13.2,13.2,0,0,0,.462-2.516,14.92,14.92,0,0,0-6.3,9.357c-2.117-6.306-1.859-13.211-.383-19.625.578-1.792,2.439-2.546,3.951-3.395q1.76-.988,3.511-1.992a9.455,9.455,0,0,0,2.883-2.05,7.52,7.52,0,0,0-2.581.385c-1.931.514-3.856,1.052-5.779,1.6a4.646,4.646,0,0,1,.167-1.1c.541-2.51,2.14-4.542,3.664-6.536a30.173,30.173,0,0,0,3.046-4.953l-1.113.614a29.409,29.409,0,0,0-7.779,9.654,16.321,16.321,0,0,1-1.979,3.477,13.634,13.634,0,0,1-2.812,2.289c-.486.322-.977.638-1.455.972-.365.255-.967.8-1.411.39-.882-.918.441-2.976.719-4.035a25.917,25.917,0,0,1,1.678-3.913,23.729,23.729,0,0,0,3.122-6.713C439,164.009,434.3,175.06,433.6,182.559c-1.245,16.735,16.973,25.553,28.119,34.648q1.454,1.118,2.9,2.245c1.042.838,3.69,2.081,2.113,3.627-.576.44-1.4.092-2.019-.036-3.639-.589-7.326-.945-10.972-1.487-1.6-.21-3.386-1.333-4.974-.627-1.541,1-.226,2.94.437,4.1a16.531,16.531,0,0,1,1.146,2.444,6.076,6.076,0,0,0,2.944,3.452c1.715.835,3.638.632,5.469.953,2.785.643,5.9,1.008,8.1,3q.182.83.4,1.654l-.32,2.527h.93a27.741,27.741,0,0,0,.356,6.794c1.382,3.456,4.528,4.6,6.364,7.376a10.008,10.008,0,0,0-2.2-4.346c-1.87-2.713-2.31-4.452-1.137-7.454,1.58,3.068,4.125,3.668,7.921,3.942a18.6,18.6,0,0,0-.183-3.241A17.266,17.266,0,0,1,475.4,241c-2.782-1.205-5.6-3.2-4.385-5.467l.453.058c-.16-.064-.273-.146-.3-.255.432.055-.863-.565-.988-.651.212-1.605-1.187-1.834-2.293-2.041l.033-.234c2.15.487,5.515,1.647,6.836,3.084a1.08,1.08,0,0,1,.26.493,5.48,5.48,0,0,0,1.342,1.881c.32.319.8.744,1.33,1.24,1.112,1.18,2.651,1.158,3.735-.71A35.989,35.989,0,0,0,479.255,246a11.427,11.427,0,0,1-.28,2.311c-.653,3.007-2.549,5.064-3.545,9.77h-.209a8.66,8.66,0,0,0,3.565,4.325,5.721,5.721,0,0,0,7.073.725c2.234-.8,4.469-2.423,4.61-5.052l-.327,0c-1.212-5.748-3.7-7.385-3.821-12.081a32.814,32.814,0,0,0-2.17-7.609c1.567,2.464,3.023,1.615,4.754-.227a6.3,6.3,0,0,0,1.562-1.962,2.191,2.191,0,0,1,.344-.711c1.034-1.283,4.825-2.655,6.837-3.088l.036.234c-1.108.207-2.5.436-2.289,2.041-.132.094-1.374.675-.992.652-.021.109-.136.191-.3.255l.454-.057c1.895,3.7-6.375,6.395-7.984,6.6a20.173,20.173,0,0,0-.179,3.241c3.631-.389,6.013-.487,7.916-3.942a6.435,6.435,0,0,1-.645,6.717c-1.043,1.663-2.251,2.768-2.688,5.06,0,0,.008,0,.01,0,1.84-2.764,4.969-3.906,6.348-7.352a29,29,0,0,0,.359-6.794h.836l-.3-2.339c1.446-3.183,5.235-4.144,8.359-4.763a10.767,10.767,0,0,1,3.271-.331c4.156-.152,5.383-3.273,6.623-6.649,1.559-2.982,2.869-4.9-1.791-3.892-4.959.682-9.916,1.528-14.872,2.148-.861.02-1.686-.8-1.188-1.659a3.1,3.1,0,0,1,.755-.759c2.28-2.013,4.661-3.905,7.118-5.7,9.027-6.666,19.588-12.881,24.372-23.512C534.45,180.545,529.013,168.47,521.728,160.137Zm-42.771,81.82c-.143-.617-.372-.946-.737-.952C478.548,241.38,479,242.018,478.957,241.957Zm7.658,0c-.043.064.743-.953.738-.952C486.983,241.011,486.754,241.342,486.615,241.957Zm-12.624-4.982-1.5-.188c-1.14,2.113,3.416,3.861,5,4.1C476.7,239.551,474.706,238.408,473.991,236.976Zm19.091-.188-1.5.188c-.716,1.433-2.7,2.575-3.5,3.914C489.667,240.648,494.222,238.9,493.082,236.787Zm-50.953-57.6a58.178,58.178,0,0,0-.477,8.4c.08,1.414.229,2.824.362,4.234.036.378.221,1.152-.043,1.492-.359.462-.96-.175-1.216-.452-4.1-4.353-3.559-12.329,1.6-15.615C442.355,177.246,442.166,178.758,442.13,179.183ZM463.341,228.7c-1.187.081-2.38.035-4.226.035-2.62.572-5.175-.1-6.426-2.671-.183-.376-.315-.765-.476-1.149-.132-.314-.394-.65-.015-.9.313-.2.708-.039,1.019.08q5.307,2.064,10.622,4.116c.171.066.367.164.367.219,0,.029,0,.3-.159.377C463.846,228.907,463.539,228.689,463.341,228.7Zm15.2,6.92c-2.778-2.185-5.483-4.5-9.02-5.207l-.155-1.219c3.991.157,6.653,3.179,9.429,5.958A1.812,1.812,0,0,0,478.542,235.62Zm4.248,28.11a5.574,5.574,0,0,1-3.432-1.239l3.429-1.618,3.426,1.618A5.648,5.648,0,0,1,482.79,263.73Zm4.466-10.028.69,1.6-5.16,4.393-5.163-4.393.689-1.6c1.679,0,2.812,2.2,4.474,2.276C484.447,255.9,485.579,253.7,487.256,253.7Zm7.976-23.288c-3.533.7-6.24,3.022-9.017,5.207a1.808,1.808,0,0,0-.255-.469c2.776-2.778,5.439-5.8,9.43-5.958Zm11.448-4.365q2.662-1.1,5.37-2.084a2.463,2.463,0,0,1,1.723-.07c-1.251,3.286-3.4,4.669-6.916,4h-3.911C503.81,226.514,505.4,226.582,506.68,226.049ZM524.593,193.2a2.4,2.4,0,0,1-.8.214,3.633,3.633,0,0,1-.131-1.845c.133-1.966.282-3.931.421-5.9-.208-2.754-.437-5.5-.493-8.258.655.618,1.369,1.207,1.962,1.886a7.786,7.786,0,0,1,1.568,3.151C528,185.972,527.61,190.786,524.593,193.2Z" transform="translate(0)" fill="#d60812"></path></g></svg>';loadingDiv.innerHTML=loadingSvg;loadingDiv.appendChild(loadingP);loadingDiv.classList.add("loading-screen");body.appendChild(loadingDiv);const toggleLoading=()=>{if(!document.querySelector(".loading-screen"))body.appendChild(loadingDiv);body.classList.toggle("loading")};var _default=exports.default=toggleLoading},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const getProducts=async({products:products,country:country})=>{let fetchUrl="https://ar5vgv5qw5.execute-api.us-east-1.amazonaws.com/list/";const fetchApi=async(id,upcharge)=>{let url=`${fetchUrl}${id}`;if(country&&country!=="us")url=url+`?country=${country}`;try{const response=await fetch(url);if(response.status===404)throw new Error(`Product ${id} Not Found.`);if(response.status==500||response.status==400)throw new Error("Sorry, there was a problem.");const data=await response.json();data.product.upcharge=upcharge||0;return data}catch(error){return Promise.reject(error)}};const data=await Promise.all(products.map((product=>fetchApi(product.id,product.upcharge))));return data.map((data=>data.product))};var _default=exports.default=getProducts},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _toggleLoading=_interopRequireDefault(require("./dom/toggleLoading.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const includesWholeWord=(str,word)=>new RegExp(`\\b${word}\\b`,"i").test(str);const handleStackProducts=async(stackProducts,stackId)=>{let string="";const response=await fetch(`https://ar5vgv5qw5.execute-api.us-east-1.amazonaws.com/list/${stackId}`);const data=await response.json();stackProducts.forEach((prod=>{let name=prod.prod.name.split(" ")[0];let aux="";if(prod.prod.name.includes("100 Series"))name="100 Series";else if(prod.prod.name.includes("Hydration"))name="Hydration";else if(prod.prod.name.includes("Non-Stimulant"))name="Stim";else if(prod.prod.name.includes("Gummies"))aux="Gummies";else if(prod.prod.name.includes("Babe"))aux=prod.prod.name.includes("Bikini")?"Bikini":"Pre";const stackValue=data.product.options.flatMap((option=>option.values.map((value=>({...value,optionId:option.id}))))).find((item=>includesWholeWord(item.name,name)&&includesWholeWord(item.name,aux)&&item.name.toLowerCase().includes((prod.value?.name||"").toLowerCase())));string=string+`&products[0][options][${stackValue.optionId}]=${stackValue.id}`}));string=string+`&products[0][quantity]=1`;return string};const handleBuy=async({stackId:stackId,upsellId:upsellId,couponCode:couponCode})=>{(0,_toggleLoading.default)();const urlParams=new URLSearchParams(window.location.search);const stackProducts=JSON.parse(localStorage.getItem("stack_products"));const excessProducts=JSON.parse(localStorage.getItem("stack_excess_products"));let string=`https://buckedup.com/cart/add?clear=true&products[0][id]=${stackId}`;if(stackProducts&&stackProducts.length===3){string=string+await handleStackProducts(stackProducts,stackId);const excessMapped=excessProducts?.map((item=>({prodId:item.prod.id,optionId:item.prod.options[0]?.id,valueId:item.value?.id})))||[];const excessNoDuplicate=[];excessMapped.forEach((item=>{const existing=excessNoDuplicate.find((r=>r.prodId===item.prodId&&r.valueId===item.valueId));if(existing){existing.quantity+=1}else{excessNoDuplicate.push({...item,quantity:1})}}));excessNoDuplicate.forEach(((item,i)=>{string=string+`&products[${i+1}][id]=${item.prodId}`;if(item.valueId){string=string+`&products[${i+1}][options][${item.optionId}]=${item.valueId}`}string=string+`&products[${i+1}][quantity]=${item.quantity}`}));if(upsellId)string=string+`&products[${excessNoDuplicate.length}][id]=${upsellId}&products[${excessNoDuplicate.length}][quantity]=1`;window.location.href=`${string}&cc=${couponCode}&${urlParams}`}else alert("You need to have a full stack.")};var _default=exports.default=handleBuy},{"./dom/toggleLoading.js":8}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _removeCard=_interopRequireDefault(require("./dom/removeCard.js"));var _handleProductRemoved=_interopRequireDefault(require("./handleProductRemoved.js"));var _handleStep=_interopRequireDefault(require("./handleStep.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleGoBackButton=()=>{const button=document.querySelector(".stack--go-back");button.addEventListener("click",(()=>{const products=JSON.parse(localStorage.getItem("stack_products"));if(!products||products.length===0){localStorage.removeItem("stack_choosen_formula");document.querySelector(`[formula-id].stack--active`).classList.remove("stack--active");(0,_handleStep.default)(true);return}const{prod:prod,value:value}=products[products.length-1];(0,_handleProductRemoved.default)({prod:prod,value:value,isStack:true});(0,_removeCard.default)({prod:prod,value:value,isStack:true})}))};var _default=exports.default=handleGoBackButton},{"./dom/removeCard.js":7,"./handleProductRemoved.js":19,"./handleStep.js":21}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _createSelectedProduct=_interopRequireDefault(require("./dom/createSelectedProduct.js"));var _handlePrice=_interopRequireDefault(require("./handlePrice.js"));var _handleProdButton=_interopRequireDefault(require("./handleProdButton.js"));var _handleStep=_interopRequireDefault(require("./handleStep.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleInit=()=>{const currentStackProducts=JSON.parse(localStorage.getItem("stack_products"));const currentExcessProducts=JSON.parse(localStorage.getItem("stack_excess_products"));const choosenFormula=localStorage.getItem("stack_choosen_formula");if(choosenFormula){document.querySelector(`[formula-id='${choosenFormula}']`).classList.add("stack--active");(0,_handleStep.default)()}if(currentStackProducts){currentStackProducts.forEach((item=>{(0,_handleStep.default)();(0,_createSelectedProduct.default)({prod:item.prod,value:item.value,isStack:true});(0,_handlePrice.default)({prod:item.prod,value:item.value,isStack:true})}))}if(currentExcessProducts)currentExcessProducts.forEach((item=>{(0,_createSelectedProduct.default)({prod:item.prod,value:item.value});(0,_handleProdButton.default)({prod:item.prod,value:item.value});(0,_handlePrice.default)({prod:item.prod,value:item.value})}))};var _default=exports.default=handleInit},{"./dom/createSelectedProduct.js":5,"./handlePrice.js":16,"./handleProdButton.js":17,"./handleStep.js":21}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _getProducts=_interopRequireDefault(require("./getProducts.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleLocalStorageProducts=async({categories:categories,timestamp:timestamp})=>{const cachedData=JSON.parse(localStorage.getItem("stackProducts"));if(cachedData&&Date.now()-cachedData.timestamp<timestamp)return cachedData.data;const data=await Promise.all(categories.map((async category=>{const products=await(0,_getProducts.default)({products:category.products});return{products:products,title:category.title,secondaryTitle:category.secondaryTitle}})));localStorage.setItem("stackProducts",JSON.stringify({data:data,timestamp:Date.now()}));return data};var _default=exports.default=handleLocalStorageProducts},{"./getProducts.js":9}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const handleMobileDropdown=()=>{const button=document.querySelector(".stack--mobile-dropdown-button");const dropdown=document.querySelector(".stack--info-row__mobile-wrapper__dropdown");button.addEventListener("click",(()=>{dropdown.classList.toggle("stack--active")}))};var _default=exports.default=handleMobileDropdown},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const handleModal=()=>{const button=document.querySelector("#upsell-button");const overlay=document.querySelector(".stack--modal__overlay");const modal=document.querySelector(".stack--modal");[button,overlay].forEach((el=>el.addEventListener("click",(()=>{const stackProducts=JSON.parse(localStorage.getItem("stack_products"));if(!stackProducts||stackProducts.length<3)return;modal.classList.toggle("stack--active")}))))};var _default=exports.default=handleModal},{}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const round=num=>Math.round(num*100)/100;const getProdPrice=(prod,value)=>round(parseFloat(prod.price.split("$")[1])+parseFloat(value?.price?.split("$")[1]||0));let stackDiscount=0;let excessDiscount=0;let stackTotal=0;let excessTotal=0;let stackUpcharge=0;const handlePrice=async({prod:prod,value:value,isRemoving:isRemoving,isStack:isStack})=>{const hasStack=JSON.parse(localStorage.getItem("stack_products")).length===3;const subTotalDom=document.querySelector("[subtotal]");const discountDom=document.querySelector("[discount]");const totalDom=document.querySelector("[total]");if(isStack){if(!isRemoving){if(hasStack)document.body.classList.add("has-full-stack");stackUpcharge=stackUpcharge+prod.upcharge;stackTotal=stackTotal+getProdPrice(prod,value);if(hasStack){stackDiscount=stackTotal-99-stackUpcharge}}else{document.body.classList.remove("has-full-stack");stackUpcharge=stackUpcharge-prod.upcharge;stackTotal=stackTotal-getProdPrice(prod,value);stackDiscount=0}}else{excessTotal=isRemoving?excessTotal-getProdPrice(prod,value):excessTotal+getProdPrice(prod,value);excessDiscount=.2*excessTotal}discountDom.innerHTML=`$${Math.abs(stackDiscount+excessDiscount).toFixed(2)}`;subTotalDom.innerHTML=`$${Math.abs(stackTotal+excessTotal).toFixed(2)}`;totalDom.innerHTML=`$${Math.abs(stackTotal+excessTotal-stackDiscount-excessDiscount).toFixed(2)}`};var _default=exports.default=handlePrice},{}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const handleProdButton=({prod:prod,value:value,isRemoving:isRemoving})=>{const wrapper=document.querySelector(`.stack--product-card__buttons-wrapper[prod_id='${prod.id}'][value='${value?.id}']`);const counter=wrapper.querySelector("span");if(isRemoving){const quantity=+counter.innerHTML-1;counter.innerHTML=quantity;if(quantity===0){wrapper.classList.remove("stack--show-add-remove-wrapper")}}else{const quantity=+counter.innerHTML+1;counter.innerHTML=quantity;wrapper.classList.add("stack--show-add-remove-wrapper")}};var _default=exports.default=handleProdButton},{}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _handlePrice=_interopRequireDefault(require("./handlePrice.js"));var _handleProdButton=_interopRequireDefault(require("./handleProdButton.js"));var _handleStep=_interopRequireDefault(require("./handleStep.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleProductAdded=({prod:prod,value:value})=>{const handleLocalStorage=({products:products,name:name})=>{if(!products){localStorage.setItem(name,JSON.stringify([{prod:prod,value:value}]))}else{localStorage.setItem(name,JSON.stringify([...products,{prod:prod,value:value}]))}};const currentStackProducts=JSON.parse(localStorage.getItem("stack_products"));const currentExcessProducts=JSON.parse(localStorage.getItem("stack_excess_products"));if(currentStackProducts?.length===3){handleLocalStorage({products:currentExcessProducts,name:"stack_excess_products"});(0,_handleProdButton.default)({prod:prod,value:value});(0,_handlePrice.default)({prod:prod,value:value})}else{handleLocalStorage({products:currentStackProducts,name:"stack_products"});(0,_handleStep.default)();(0,_handlePrice.default)({prod:prod,value:value,isStack:true})}};var _default=exports.default=handleProductAdded},{"./handlePrice.js":16,"./handleProdButton.js":17,"./handleStep.js":21}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _handlePrice=_interopRequireDefault(require("./handlePrice.js"));var _handleProdButton=_interopRequireDefault(require("./handleProdButton.js"));var _handleStep=_interopRequireDefault(require("./handleStep.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleProductRemoved=({prod:prod,value:value,isStack:isStack})=>{const handleLocalStorage=({products:products,name:name})=>{const indexToRemove=products.findIndex((item=>item.prod.id===prod.id&&item.value?.id===value?.id));products.splice(indexToRemove,1);localStorage.setItem(name,JSON.stringify(products))};if(isStack){(0,_handleStep.default)(true);const currentStackProducts=JSON.parse(localStorage.getItem("stack_products"));handleLocalStorage({products:currentStackProducts,name:"stack_products"});(0,_handlePrice.default)({prod:prod,value:value,isRemoving:true,isStack:true})}else{const currentExcessProducts=JSON.parse(localStorage.getItem("stack_excess_products"));(0,_handleProdButton.default)({prod:prod,value:value,isRemoving:true});handleLocalStorage({products:currentExcessProducts,name:"stack_excess_products"});(0,_handlePrice.default)({prod:prod,value:value,isRemoving:true})}};var _default=exports.default=handleProductRemoved},{"./handlePrice.js":16,"./handleProdButton.js":17,"./handleStep.js":21}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _removeCard=_interopRequireDefault(require("./dom/removeCard.js"));var _handleProductRemoved=_interopRequireDefault(require("./handleProductRemoved.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const handleRemoveButton=({prod:prod,value:value,button:button,isStack:isStack})=>{const handleClick=()=>{(0,_handleProductRemoved.default)({prod:prod,value:value,isStack:isStack});(0,_removeCard.default)({prod:prod,value:value,isStack:isStack})};button.addEventListener("click",handleClick)};var _default=exports.default=handleRemoveButton},{"./dom/removeCard.js":7,"./handleProductRemoved.js":19}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;let currentStep=0;const handleStep=goBack=>{const stackContainer=document.querySelector(".stack--container");const steps=Array.from(document.querySelectorAll(".stack--category-container"));const dropdown=document.querySelector(".stack--info-row__mobile-wrapper__dropdown");const goBackButton=document.querySelector(".stack--go-back");if(currentStep>steps.length-1){steps.forEach((step=>{step.classList.remove("stack--active");const titles=step.querySelectorAll(".stack--category-title");if(titles.length>1){titles[0].classList.add("stack--active");titles[1].classList.remove("stack--active")}}));steps[steps.length-1].classList.add("stack--active");currentStep--;document.querySelectorAll(`[formula-id]`).forEach((el=>el.classList.remove("stack--active")));const choosenFormula=localStorage.getItem("stack_choosen_formula");document.querySelector(`[formula-id='${choosenFormula}']`).classList.add("stack--active");window.scrollTo({top:0,behavior:"smooth"});return}if(currentStep===steps.length-1&&!goBack){stackContainer.classList.remove("hide-add-remove-buttons");const[first,...rest]=steps;rest.forEach((step=>{step.classList.add("stack--active");const titles=step.querySelectorAll(".stack--category-title");titles[1].classList.add("stack--active");titles[0].classList.remove("stack--active")}));currentStep++;dropdown.classList.add("stack--active");document.querySelectorAll(`[formula-id]`).forEach((el=>el.classList.add("stack--active")));window.scrollTo({top:0,behavior:"smooth"});return}if(goBack){steps[currentStep].classList.remove("stack--active");currentStep--;steps[currentStep].classList.add("stack--active");if(currentStep===0){goBackButton.classList.remove("stack--active")}}else{steps[currentStep].classList.remove("stack--active");currentStep++;steps[currentStep].classList.add("stack--active");goBackButton.classList.add("stack--active")}window.scrollTo({top:0,behavior:"smooth"})};var _default=exports.default=handleStep},{}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;const handleSwipers=()=>{const selectedProductsSwiper=new Swiper(".stack--selected-products",{slidesPerView:4,spaceBetween:8,freeMode:{enabled:true,sticky:false},mousewheel:{enabled:true},scrollbar:{el:".stack--selected-products__scrollbar",draggable:true}});window.selectedProductsSwiper=selectedProductsSwiper;const swiperArrowsNext=document.querySelectorAll(".stack--swiper-arrow.stack--next");const swiperArrowsPrev=document.querySelectorAll(".stack--swiper-arrow.stack--prev");const swiperPaginations=document.querySelectorAll(".stack--swiper-pagination");document.querySelectorAll(".stack--swiper-product").forEach(((swiper,i)=>{swiper.setAttribute("swiper-product",i);swiperArrowsNext[i].setAttribute("swiper-arrow",i);swiperArrowsPrev[i].setAttribute("swiper-arrow",i);swiperPaginations[i].setAttribute("swiper-pagination",i);new Swiper(`[swiper-product='${i}']`,{slidesPerView:2,slidesPerGroup:2,spaceBetween:14,rewind:true,pagination:{el:`[swiper-pagination='${i}']`,clickable:true},navigation:{nextEl:`.stack--next[swiper-arrow='${i}']`,prevEl:`.stack--prev[swiper-arrow='${i}']`},breakpoints:{701:{slidesPerView:4,slidesPerGroup:4,grid:{rows:2,fill:"row"}}}})}))};var _default=exports.default=handleSwipers},{}],23:[function(require,module,exports){"use strict";var _handleDom=_interopRequireDefault(require("./dom/handleDom.js"));var _toggleLoading=_interopRequireDefault(require("./dom/toggleLoading.js"));var _handleBuy=_interopRequireDefault(require("./handleBuy.js"));var _handleGoBackButton=_interopRequireDefault(require("./handleGoBackButton.js"));var _handleInit=_interopRequireDefault(require("./handleInit.js"));var _handleLocalStorageProducts=_interopRequireDefault(require("./handleLocalStorageProducts.js"));var _handleMobileDropdown=_interopRequireDefault(require("./handleMobileDropdown.js"));var _handleModal=_interopRequireDefault(require("./handleModal.js"));var _handleSwipers=_interopRequireDefault(require("./handleSwipers.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const buildStack=async({stackId:stackId,categories:categories,formulas:formulas,upsellId:upsellId,couponCode:couponCode})=>{window.addEventListener("pageshow",(function(event){if(event.persisted){document.body.classList.remove("loading")}}));(0,_toggleLoading.default)();const data=await(0,_handleLocalStorageProducts.default)({categories:categories,timestamp:5*60*1e3});(0,_toggleLoading.default)();(0,_handleDom.default)({data:data,formulas:formulas});(0,_handleSwipers.default)();(0,_handleInit.default)();(0,_handleMobileDropdown.default)();(0,_handleGoBackButton.default)();if(upsellId){(0,_handleModal.default)();document.getElementById("buy-button").addEventListener("click",(()=>(0,_handleBuy.default)({upsellId:upsellId,couponCode:couponCode,stackId:stackId})));document.getElementById("no-button").addEventListener("click",(()=>(0,_handleBuy.default)({couponCode:couponCode,stackId:stackId})))}else{document.getElementById("upsell-button").addEventListener("click",(()=>(0,_handleBuy.default)({couponCode:couponCode,stackId:stackId})))}};window.buildStack=buildStack},{"./dom/handleDom.js":6,"./dom/toggleLoading.js":8,"./handleBuy.js":10,"./handleGoBackButton.js":11,"./handleInit.js":12,"./handleLocalStorageProducts.js":13,"./handleMobileDropdown.js":14,"./handleModal.js":15,"./handleSwipers.js":22}]},{},[23]);